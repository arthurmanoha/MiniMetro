2D train game

---------------------------------------------------------------------------------------------------
KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS 
---------------------------------------------------------------------------------------------------

Tracks are not build as they should when drawn on top of existing tracks.

---------------------------------------------------------------------------------------------------
TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO 
---------------------------------------------------------------------------------------------------

Snap : a TE shall be snapped to a RailSegment only if the velocity is reasonably aligned. Crossings become obvious.
Cells shall be drawn as sprites.
Tracks shall connect two sides of a cell, or one side and one corner of a cell, and be aligned vertically, horizontally or diagonally
A TrainLink shall be connected to a point close to either end of the TrainElement, not to its center.
A TrainLink shall have a maximum allowed force, above which it shall break.
The CutLink shall allow to remove the link between two TrainElements.
A TrainElement shall have a length that depends on its sub-type.
A TrainElement shall not be added if too many elements are too close.
A cell may have a speed indicator that the loco shall observe, and increase its max speed or apply brakes.
A Cell may be a junction and contain two possible layouts, one being active and the other one greyed out.
A carriage stores its passenger max and current capacity.
An IntersectionCell is a special cell, where one track splits into several tracks.
A station cell may be crossed by a railway.
A station cell may host passengers.
A passenger may transfer between a station cell and a neighboring wagon.
A passenger has a station ID target.
A passenger shall find a path from its current position to its target: which line to use, which station to walk to.
A passenger may walk from one station to another if the stations have one side in common.
Add portal cells.

Tools:

Display a list radio buttons for locomotives in a panel; a selected radio button will focus the view on the loco.
Display the current speed of each loco if a radio button is checked.

Create passengers with destination.

High-Speed trains:
Can drive faster than other trains.
Only high-speed tracks accept certain speeds; the higher the speed (above the limit), the greater probability that the track fails.
Trains leave track and crash if turns are taken at an excessive speed.

Tracks wear off with time and use, and need to be replaced.
Tracks wear off quicker when trains drive faster.
High-speed tracks are more expensive per unit length.
Passengers pay money when they get to their destination.

When the user requests a track be created outside the world bounds, the world must be extended one row or column.

---------------------------------------------------------------------------------------------------
DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE
---------------------------------------------------------------------------------------------------

Train tracks shall be drawn procedurally with rails, ballast and railroad ties, on top of the cell.
Curves allow for 90° and 45° turns, tracks can be placed diagonally.
TrainElements shall be drawn as sprites.
ConcurrentModificationExceptions when painting scene, fixed using SwingUtilities.invokeLater
A track may be removed by clicking in the cell with the 'Track' tool active.
A cell may be emptied from its TrainElements when clicked with the 'Empty Cell' tool activated.
Square grid
One cell is either empty or a station.
A cell may host one railway, which is made of several RailSegments.
Loco and carriage are subclasses of TrainElement.
Create stations.
Create tracks with the mouse.
Rails in turns shall be bent.
A loco moves along the track and visits successive cells.
A train is made of any number of locomotives and any number of carriages.
A train element stores its absolute position and speed.
A link stores references to the two elements it links.