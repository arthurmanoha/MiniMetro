2D train game

---------------------------------------------------------------------------------------------------
KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS KNOWN BUGS 
---------------------------------------------------------------------------------------------------

TEs are not snapped onto the correct RailSegment.
A Locomotive does not brake hard enough at low speed.
Passengers shall only board a wagon at zero speed.

---------------------------------------------------------------------------------------------------
TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO TODO 
---------------------------------------------------------------------------------------------------

Passengers on the platform shall be positioned away from the tracks.
A tool shall be available to place straight tracks overs long distances, horizontally, vertically or diagonally.
Passengers shall use the logical map to find their way.
The world shall be stored as a sparse matrix but still painted the same way.
The grid shall show one in ten lines at large enough scales.
The world shall contain water areas.
Water areas can be crossed by bridges.
The world shall contain mountains of different altitudes.
A railroad on a slope shall have an impact on the speed of any TrainElement that drives on it.
Dampen springs between TrainElements: a spring has less force when shrinking.
TrainElements shall turn smoothly in curves.
Tracks and trains shall have a simplified drawing version for large-scale visualization.
Speed limits and stop signs shall spread to the whole tile at large scales.
Display only visible tiles.
Tracks shall be saved to file and loaded from file.
Cells shall be drawn as sprites.
A TrainLink shall be connected to a point close to either end of the TrainElement, not to its center.
A new TrainLink shall be created or severed between two existing TrainElements, without any TE being created or deleted.
Locomotives can be electric or coal-fueled.
Electricity is brought from a production tile to the tracks via cables, tracks are fit with an overhead line or via the tracks.
Coal is produced at a specified rate in the factory.
Coal is loaded at a specified rate into a coal wagon and has mass.
Snap : a TE shall be snapped to a RailSegment only if the velocity is reasonably aligned. Crossings become obvious.
A TrainLink shall have a maximum allowed force, above which it shall break.
The CutLink shall allow to remove the link between two TrainElements.
A TrainElement shall have a length that depends on its sub-type.
A TrainElement shall not be added if too many elements are too close.
A cell may have a speed indicator that the loco shall observe, and increase its max speed or apply brakes.
A Cell may be a junction and contain two possible layouts, one being active and the other one greyed out.
A carriage stores its passenger max and current capacity.
An IntersectionCell is a special cell, where one track splits into several tracks.
A passenger shall find a path from its current position to its target: which line to use, which station to walk to.
A passenger may walk from one station to another if the stations have one side in common.
Add portal cells.

Tools:

Display a list radio buttons for locomotives in a panel; a selected radio button will focus the view on the loco.
Display the current speed of each loco if a radio button is checked.

Create passengers with destination.

High-Speed trains:
Can drive faster than other trains.
Only high-speed tracks accept certain speeds; the higher the speed (above the limit), the greater probability that the track fails.
Trains leave track and crash if turns are taken at an excessive speed.

Tracks wear off with time and use, and need to be replaced.
Tracks wear off quicker when trains drive faster.
High-speed tracks are more expensive per unit length.
Passengers pay money when they get to their destination.

When the user requests a track be created outside the world bounds, the world must be extended one row or column.

---------------------------------------------------------------------------------------------------
DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE DONE
---------------------------------------------------------------------------------------------------

A logical map of the tracks shall be updated when locos drive into stations.
Stations shall have unique colors.
Passengers shall have the same color as their target station.
A station cell may be crossed by a railway.
A station cell may host passengers.
A passenger may transfer between a station cell and a wagon inside that cell.
A passenger has a station ID target.
Passengers inside their wagon shall be displayed on aligned seats.
Passengers board wagons up to capacity.
Passengers do not board when they already are at destination.
Toolbars shall be set vertical on either side of the window.
Speed of TrainElements is now represented with a heading and linear velocity, not as vx and vy. Thus, locos no longer are reversed by slowing wagons.
Create a stop timer: any loco in that cell shall stop for the given amount of time and may then start moving again.
Solved bug: Tracks are not build as they should when drawn on top of existing tracks.
Implement speed limits in a cell, that are set to each loco crossing that cell, and stay active until another limit is set or the limit is removed.
Draw roadsigns to show the speed limits, in an empty part of the cell.
Tracks shall connect two sides of a cell, or one side and one corner of a cell, and be aligned vertically, horizontally or diagonally
Train tracks shall be drawn procedurally with rails, ballast and railroad ties, on top of the cell.
Curves allow for 90° and 45° turns, tracks can be placed diagonally.
TrainElements shall be drawn as sprites.
ConcurrentModificationExceptions when painting scene, fixed using SwingUtilities.invokeLater
A track may be removed by clicking in the cell with the 'Track' tool active.
A cell may be emptied from its TrainElements when clicked with the 'Empty Cell' tool activated.
Square grid
One cell is either empty or a station.
A cell may host one railway, which is made of several RailSegments.
Loco and carriage are subclasses of TrainElement.
Create stations.
Create tracks with the mouse.
Rails in turns shall be bent.
A loco moves along the track and visits successive cells.
A train is made of any number of locomotives and any number of carriages.
A train element stores its absolute position and speed.
A link stores references to the two elements it links.